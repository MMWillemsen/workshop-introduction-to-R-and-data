---
title: "Data science in the Tidyverse - Solutions"
author: "Barbara Vreede"
output:
  html_document:
    toc: true
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction

```{r} 
library(tidyverse)
library(readxl)
```


# Chapter 1: Importing data

## Exercise 1
```{r}
penguins <- read_delim(file = "data/penguins_raw.tsv",
                       delim = "\t")
```


## Exercise 2
```{r}
penguins <- read_delim(file = "data/penguins_raw.tsv",
                       delim = "\t",
                       col_types = cols(`Date Egg` = col_date(format = "%d/%m/%Y")))
```

## Exercise 3
```{r}
penguins_isotopes <- read_excel(path = "data/penguins_isotopes.xlsx")
```

## Exercise 4
```{r}
write_delim(penguins_isotopes,
            path = "data/penguins_isotopes.csv",
            delim = ";")
```


# Chapter 2: Subsetting and mutating

## Exercise 5
```{r}
# option 1: filtering on the presence of MALE and FEMALE
penguins_subset <- filter(penguins, Sex %in% c("MALE", "FEMALE"))

# option 2: filtering on the absence of NA
penguins_subset <- filter(penguins, !is.na(Sex))
```

## Exercise 6
```{r}
penguins_subset <- select(penguins_subset, 
                  `Individual ID`, Species, Sex, Island, starts_with("Culmen"))
```

## Exercise 7
```{r}
penguins_subset <- penguins %>%
  filter(!is.na(Sex)) %>%
  select(`Individual ID`, Species, Sex, Island, starts_with("Culmen"))
```


## Exercise 8
```{r}
penguins_subset <- mutate(penguins_subset,
                          culmen_ratio = `Culmen Length (mm)` / `Culmen Depth (mm)`)
```


# Chapter 3: Tidy data

## Exercise 9
```{r}
penguins_long <- penguins_subset %>%
  rename(length = `Culmen Length (mm)`,
         depth = `Culmen Depth (mm)`) %>%
  pivot_longer(cols = c(length, depth),
               names_to = "culmen_element",
               values_to = "measurement")
```

## Exercise 10
```{r}
penguins_summary <- penguins_long %>%
  group_by(Species, culmen_element) %>%
  summarize(avg = mean(measurement),
            sd = sd(measurement))
```


## Exercise 11
```{r}
penguins_join <- full_join(penguins_long, penguins_summary,
                           by = c("Species", "culmen_element"))
```

## Exercise 12
```{r}
penguins_join <- penguins_join %>%
  mutate(standardized = (measurement - avg)/sd)
```

## Exercise 13
```{r}



```

## Exercise 3
```{r}

```

## Exercise 3
```{r}

```

## Exercise 3
```{r}

```

## Exercise 3
```{r}

```

## Exercise 3
```{r}

```

## Exercise 3
```{r}

```

## Exercise 3
```{r}

```

## Exercise 3
```{r}

```